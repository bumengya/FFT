#include <stdio.h>
#include <math.h>
#include <string.h>
#include "fft.h"

#define NPT 256

compx s[NPT];
float fft_data[NPT];
long data_in[NPT]={0,66,116,138,129,95,48,1,-35,-54,-59,-55,-51,-51,-55,-59,-54,-35,1,48,95,129,138,116,66,0,-66,-116,-138,-129,-95,-48,-1,35,54,59,55,51,51,55,59,54,35,-1,-48,-95,-129,-138,-116,
	-66,0,66,116,138,129,95,48,1,-35,-54,-59,-55,-51,-51,-55,-59,-54,-35,1,48,95,129,138,116,66,0,-66,-116,-138,-129,-95,-48,-1,35,54,59,55,51,51,55,59,54,35,-1,-48,-95,-129,-138,-116,-66,0,66,116,138,
	129,95,48,1,-35,-54,-59,-55,-51,-51,-55,-59,-54,-35,1,48,95,129,138,116,66,0,-66,-116,-138,-129,-95,-48,-1,35,54,59,55,51,51,55,59,54,35,-1,-48,-95,-129,-138,-116,-66,0,66,116,138,129,95,48,1,-35,
	-54,-59,-55,-51,-51,-55,-59,-54,-35,1,48,95,129,138,116,66,0,-66,-116,-138,-129,-95,-48,-1,35,54,59,55,51,51,55,59,54,35,-1,-48,-95,-129,-138,-116,-66,0,66,116,138,129,95,48,1,-35,-54,-59,-55,-51,
	-51,-55,-59,-54,-35,1,48,95,129,138,116,66,0,-66,-116,-138,-129,-95,-48,-1,35,54,59,55,51,51,55,59,54,35,-1,-48,-95,-129,-138,-116,-66,0,66,116,138,129,95};

long data_in2[NPT]={0,84,129,118,60,-9,-51,-44,5,64,95,75,7,-77,-138,-145,-96,-16,55,83,59,3,-48,-59,-21,50,116,140,106,28,-59,-114,-114,-65,1,45,43,-4,-66,-106,-95,-33,54,125,146,109,35,-37,
	-70,-53,0,53,70,37,-35,-109,-146,-125,-54,33,95,106,66,4,-43,-45,-1,65,114,114,59,-28,-106,-140,-116,-50,21,59,48,-3,-59,-83,-55,16,96,145,138,77,-7,-75,-95,-64,-5,44,51,9,-60,-118,-129,
	-84,0,84,129,118,60,-9,-51,-44,5,64,95,75,7,-77,-138,-145,-96,-16,55,83,59,3,-48,-59,-21,50,116,140,106,28,-59,-114,-114,-65,1,45,43,-4,-66,-106,-95,-33,54,125,146,109,35,-37,-70,-53,0,
	53,70,37,-35,-109,-146,-125,-54,33,95,106,66,4,-43,-45,-1,65,114,114,59,-28,-106,-140,-116,-50,21,59,48,-3,-59,-83,-55,16,96,145,138,77,-7,-75,-95,-64,-5,44,51,9,-60,-118,-129,-84,0,84,
	129,118,60,-9,-51,-44,5,64,95,75,7,-77,-138,-145,-96,-16,55,83,59,3,-48,-59,-21,50,116,140,106,28,-59,-114,-114,-65,1,45,43,-4,-66,-106,-95,-33,54,125,146,109,35,-37,-70,-53,0,53,70,37,-35,-109};
	
long data_in3[NPT]={0,9,17,26,34,42,51,59,66,74,81,88,94,100,106,111,116,120,124,128,131,133,135,137,138,139,139,138,137,136,134,132,129,126,123,119,115,110,
	105,100,95,90,84,78,72,66,60,54,48,41,35,29,23,17,12,6,1,-5,-10,-14,-19,-23,-28,-31,-35,-38,-41,-44,-47,-49,-51,-53,-54,-56,-57,-57,-58,-58,-59,-59,-59,-59,
	-58,-58,-57,-57,-56,-56,-55,-54,-54,-53,-53,-52,-51,-51,-51,-50,-50,-50,-50,-50,-50,-50,-51,-51,-51,-52,-53,-53,-54,-54,-55,-56,-56,-57,-57,-58,-58,-59,-59
	,-59,-59,-58,-58,-57,-57,-56,-54,-53,-51,-49,-47,-44,-41,-38,-35,-31,-28,-23,-19,-14,-10,-5,1,6,12,17,23,29,35,41,48,54,60,66,72,78,84,90,95,100,105,110,115,
	119,123,126,129,132,134,136,137,138,139,139,138,137,135,133,131,128,124,120,116,111,106,100,94,88,81,74,66,59,51,42,34,26,17,9,0,-9,-17,-26,-34,-42,-51,-59,
	-66,-74,-81,-88,-94,-100,-106,-111,-116,-120,-124,-128,-131,-133,-135,-137,-138,-139,-139,-138,-137,-136,-134,-132,-129,-126,-123,-119,-115,-110,-105,-100,
	-95,-90,-84,-78,-72,-66,-60,-54,-48,-41,-35,-29,-23,-17,-12,-6};
int main() {
    int i, j, k;
	
	//做execl表格用
//	for(int i=0;i<NPT;i++)
//		printf("%d\r\n",data_in3[i]);
		
    // 初始化复数数组
    for (j = 0; j < NPT; j++) {
        s[j].real = data_in3[j];
        s[j].imag = 0;
    }

    // 执行 FFT
    FFT(s, NPT);
    printf("FFT:\r\n");
    for (k = 0; k < NPT; k++) {
    	fft_data[k] = sqrt(s[k].real * s[k].real + s[k].imag * s[k].imag);
    	printf("%f\r\n",fft_data[k]);
    }//打印模长 可根据下标算相位差 频率 判断波形等数据
	  
	IFFT(s, NPT);  
	printf("IFFT:\r\n");
    for (i = 0; i < NPT; i++) {
        printf("%f\r\n",s[i].real);
    }
    
    return 0;
}
